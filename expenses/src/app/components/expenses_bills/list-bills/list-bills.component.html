<app-expenses-expenses_bills-nav/>
<div class="container mt-5">
  <h3 class="mb-4">gastos</h3>
  <form class="form-row mb-4 d-flex align-items-end" [formGroup]="filters">
    <div class="form-group col-md-3 me-3">
      <label for="periodo">Periodo</label>
      <select id="tipo" class="form-control" formControlName="selectedPeriod">
        @for(period of periodsList; track $index){
          <option [ngValue]="{period}">{{period.month}}/{{period.year}}</option>
        }
      </select>
    </div>
    <div class="form-group col-md-3 me-3">
      <label for="tipo">Proveedor</label>
      <select id="tipo" class="form-control" formControlName = "selectedSupplier">
        @for(provider of providersList; track $index){
          <option [ngValue]="{provider}">{{provider.name}}</option>
        }
      </select>
    </div>
    <div class="form-group col-md-3 me-3">
      <label for="lote">Categoría</label>
      <select id="lote" class="form-control" formControlName="selectedCategory">
        @for(category of categoryList; track $index){
          <option [ngValue]="{category}">{{category.name}}</option>
        }
      </select>
    </div>
    <div class="form-group col-md-3 d-flex align-items-end">
      <button type="button" class="btn btn-primary btn-block" (click)="filterBills()">Buscar</button>
      <button type="button" class="btn btn-secondary btn-block ms-3" (click)="unFilterBills()">Limpiar</button>
    </div>
  </form>

  <div class="table-responsive text-center">
    <table class="table table-bordered">
      <thead class="thead-light">
        <tr>
          <th>Tipo</th>
          <th>Proveedor</th>
          <th>Monto</th>
          <th>Periodo</th>
          <th>Categoría</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        @for (bill of bills; track $index) {
        <tr>
          <td>{{ bill.billType?.description}}</td>
          <td>{{ bill.supplier?.name}}</td>
          <td>${{ bill.amount }}</td>
          <td>{{ bill.period?.month }}/{{bill.period?.year}}</td>
          <td>{{ bill.category?.name }}</td>
          <td>
            <button
              class="btn btn-primary btn-sm mr-2"
              (click)="openUpdateModal(selectedBill)"
            >
              <i class="bi bi-eye"></i>
            </button>

            <button
              class="btn btn-danger btn-sm"
              (click)="openDeleteModal(selectedBill?.expenditureId)"
            >
              <i class="bi bi-trash"></i>
            </button>
          </td>
        </tr>
        }
      </tbody>
    </table>
  </div>

  <nav aria-label="Page navigation example">
    <ul class="pagination justify-content-center">
      <li class="page-item disabled">
        <a class="page-link" href="#" tabindex="-1">&lt;</a>
      </li>
      
      <li class="page-item active"><a class="page-link" href="#">1</a></li>
      <li class="page-item"><a class="page-link" href="#">2</a></li>
      <li class="page-item"><a class="page-link" href="#">3</a></li>
      <li class="page-item"><a class="page-link" href="#">4</a></li>
      <li class="page-item">
        <a class="page-link" href="#">&gt;</a>
      </li>
    </ul>
  </nav>
</div>
